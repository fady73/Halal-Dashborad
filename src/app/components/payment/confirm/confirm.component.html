<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10" id="submitted">
        <h3>Review payment receipt </h3>
        <ol class="breadcrumb">

            <li class="breadcrumb-item">
                <a>Admin</a>
            </li>
            <li class="breadcrumb-item active">
                <a>Review payment receipt</a>
            </li>
        </ol>
    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight" id="appendix-content">

    <div class="row">
        <div class="col-lg-12">
            <div class="ibox ">
                <div class="ibox-title">
                    <h5>Review payment receipt</h5>
                </div>
                <div class="ibox-content">
                    <!-- <div class="form" [formGroup]="page.seachForm">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-form-label " for="date_added">Country</label>
                                    <select class=" form-control" formControlName="CountryID">
                                        <option value="null">All</option>
                                        <option *ngFor="let item of countries" [value]="item.ID">{{item.Name}}</option>
                                    </select>

                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-form-label " for="date_added">Company</label>
                                    <select class=" form-control" formControlName="CompanyID">
                                        <option value="null">All</option>
                                        <option *ngFor="let item of companies" [value]="item.ID">{{item.Name}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-form-label " for="date_added">Request Type</label>
                                    <select class=" form-control" formControlName="TypeID">
                                        <option value="null">All</option>
                                        <option *ngFor="let item of paymentTypes" [value]="item.ID">{{item.Name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-form-label label1" for="status">Request Status</label>
                                    <select class=" form-control status" formControlName="StatusID">
                                        <option value="null">All</option>
                                        <option *ngFor="let item of paymentStatus" [value]="item.ID">{{item.Name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group" id="data_1">
                                    <label class="col-form-label label1" for="date_added">From date</label>
                                    <div class="input-group date">
                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span><input
                                            bsDatepicker type="text" formControlName="FromDate" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label class="col-form-label label1" for="date_modified"> To date</label>
                                    <div class="input-group date">
                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                        <input bsDatepicker type="text" formControlName="ToDate" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row filter">
                            <div class="col-sm-12">
                                <button type="button" (click)="onSearchClicked()" class="btn btn-primary float-right">
                                    <i class="fa fa-filter"></i>
                                    Filter
                                </button>
                            </div>
                        </div>
                    </div> -->

                    <div class="row">
                        <div class="table-responsive">

                            <table class="table table-stripped toggle-arrow-tiny" id="customers">
                                <thead>
                                    <tr>
                                        <!-- <th>#</!-->
                                        <!-- <th>Payment ID</th> -->
                                        <th>RequestID</th>
                                        <th>Payment date</th>
                                        <th>Company name</th>
                                        <th>Company country</th>
                                        <!-- <th>Assigned Employee</th> -->
                                        <!-- <th>Payment Type</th> -->
                                        <th>Request status</th>
                                        <th>Review payments</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr [hidden]="!page.isLoading">
                                        <td colspan="11">
                                            <h1><i class="blue fa fa-refresh fa-spin"></i></h1>
                                        </td>
                                    </tr>
                                    <tr [hidden]="page.isLoading" *ngFor="let item of items">
                                        <td>{{item.RequestID}}</td>
                                        <td>{{item.PaymentDate |date:'dd-MM-yyyy'}} </td>
                                        <td>{{item.CompanyName}}</td>
                                        <td>{{item.CountryName}}</td>
                                        <td>{{item.RequestStatusName}}</td>

                                        <td>
                                            <a class="btn btn-transparent" target="_blank" [href]="item.FilePath">
                                                <i class="fa fa-download text-muted"></i>
                                                <span class="text-muted"> Download recepit</span>
                                            </a>
                                        </td>
                                        <!-- <td>{{item.Confirmed}}</td> -->
                                        <td>
                                            <button *ngIf="item.Confirmed == false "
                                                (click)="showApproveConfirmation(item)" class="btn btn-transparent">
                                                <i class="fa fa-check text-navy"></i>
                                                <span class="text-navy"> Confirm</span>
                                            </button>

                                            <button *ngIf="item.Confirmed == false "
                                                (click)="showCancelConfirmation(item)" class="btn btn-transparent">
                                                <i class="fa fa-times text-danger"></i>
                                                <span class="text-danger"> Decline</span>
                                            </button>

                                            <button *ngIf="item.Confirmed" [disabled]="item.Confirmed"
                                                class="btn btn-transparent">
                                                <i class="fa fa-check-circle-o text-navy"></i>
                                                <span class="text-navy"> Confirmed</span>
                                            </button>
                                        </td>

                                    </tr>
                                    <!------------------------------------------------------------------------>


                                </tbody>

                            </table>
                        </div>
                    </div>




                </div>



            </div>
        </div>
    </div>
</div>



<ng-template #cancelTemplate>
    <div class="declineTemplate">
        <div class="modal-header ">
            <h4 class="modal-title pull-left">Decline payment</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <p> Are you sure you want to decline this payment ??<br> </p>
            <textarea cols="50" rows="5" placeholder=" Write your reasons here........"
            [(ngModel)]="paymentCancelViewModel.Reason"></textarea>
        </div>
        <div class="modal-footer text-center">
            <button type="button" class="btn btn-danger btn-outline margin-h-10" (click)="modalRef.hide()"> &nbsp;
                &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{{'shared.no'|translate}} &nbsp; &nbsp;&nbsp; &nbsp;
                &nbsp; &nbsp; &nbsp; &nbsp;</button>
            <button type="button" *ngIf="selectedItem" class="btn btn-danger   " (click)="cancel();modalRef.hide();">
                &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                &nbsp; Decline &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</button>
        </div>
    </div>
</ng-template>


<ng-template #approveTemplate>
    <div class="approveTemplate">
        <div class="modal-header ">
            <h4 class="modal-title pull-left">Confirm payment</h4>
            <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body ">
            <p> {{'shared.payment-confirmation.message'|translate}}<br> <strong
                    *ngIf="selectedItem">{{selectedItem.CompanyCountry}}</strong></p>


        </div>

        <div class="modal-footer text-center">
            <button type="button" class="btn btn-primary btn-outline margin-h-10" (click)="modalRef.hide()"> &nbsp;
                &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{{'shared.no'|translate}} &nbsp; &nbsp;&nbsp; &nbsp;
                &nbsp; &nbsp; &nbsp; &nbsp;</button>
            <button type="button" *ngIf="selectedItem" class="btn btn-primary   "
                (click)="approve(selectedItem);modalRef.hide();"> &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                &nbsp;{{'shared.yes'|translate}} &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</button>


        </div>
    </div>
</ng-template>